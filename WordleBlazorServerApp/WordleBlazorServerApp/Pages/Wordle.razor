@page "/wordle"

@using WorldleGameEngine
@using global::Shared

@inject IGameEngine gameEngine;

<h3>Wordle</h3>

Enter wordle: <br/>
<input type="text" @bind-value="@guess" /> <br/> <br/>

<button class="btn" type="button" @onclick="EnterGuess">Enter</button><br /><br />

<button class="btn" type="button" @onclick="NewGame">New Game</button><br /><br />

@if (gameState != null && gameState.GuessResult != null)
{
    @if(gameState.IsGameComplete)
    {
        <span>@gameState.GuessResult.ResultMessage</span>
    }
    else
    {
        if(gameState.GuessResult.IncorrectGuessHints != null)
        {
            if (gameState.GuessResult.IncorrectGuessHints.LetterPositionsPresentInGuessAndInCorrectPosition.Count > 0){
                <span>LetterPositionsPresentInGuessAndInCorrectPosition: </span>
                <span>@string.Join(" ", gameState.GuessResult.IncorrectGuessHints.LetterPositionsPresentInGuessAndInCorrectPosition)</span><br /><br />
            }

            @if (gameState.GuessResult.IncorrectGuessHints.LetterPositionsPresentInGuessButNotInCorrectPosition.Count > 0){
                <span>LetterPositionsPresentInGuessButNotInCorrectPosition: </span>
                <span>@string.Join(" ", gameState.GuessResult.IncorrectGuessHints.LetterPositionsPresentInGuessButNotInCorrectPosition)</span><br /><br />
            }

            @if (gameState.GuessResult.IncorrectGuessHints.LetterPositionsNotPresentInGuess.Count > 0){
                <span>LetterPositionsNotPresentInGuess: </span>
                <span>@string.Join(" ", gameState.GuessResult.IncorrectGuessHints.LetterPositionsNotPresentInGuess)</span><br /><br />
            }
        }
        else
        {
            <span>@gameState.GuessResult.ResultMessage</span>
        }
    }
}

@code {
    string guess;
    GameState gameState;

    protected override void OnInitialized()
    {
        gameState = gameEngine.NewGame();
    }

    private void EnterGuess()
    {
        gameState = gameEngine.EnterGuess(guess);
    }

    private void NewGame()
    {
        gameState = gameEngine.NewGame();
        guess = string.Empty;
    }
}
